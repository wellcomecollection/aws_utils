.. This file is autogenerated; edits will be lost.
   To rebuild this file, run "tox -e check_api_docs".

API reference
=============

Deployment utilities
********************

.. raw:: html

    <span id="deployment-utilities"></span>
    <p>Shared library to help surface ECS deployment information.</p>
    <dl class="class">
    <dt id="wellcome_aws_utils.deployment_utils.Deployment">
    <em class="property">class </em><code class="descclassname">wellcome_aws_utils.deployment_utils.</code><code class="descname">Deployment</code><span class="sig-paren">(</span><em>deployment_key</em>, <em>deployment_status</em>, <em>color</em>, <em>created_at</em>, <em>task_definition</em><span class="sig-paren">)</span><a class="headerlink" href="#wellcome_aws_utils.deployment_utils.Deployment" title="Permalink to this definition">¶</a></dt>
    <dd><dl class="attribute">
    <dt id="wellcome_aws_utils.deployment_utils.Deployment.color">
    <code class="descname">color</code><a class="headerlink" href="#wellcome_aws_utils.deployment_utils.Deployment.color" title="Permalink to this definition">¶</a></dt>
    <dd><p>Alias for field number 2</p>
    </dd></dl>
    <dl class="attribute">
    <dt id="wellcome_aws_utils.deployment_utils.Deployment.created_at">
    <code class="descname">created_at</code><a class="headerlink" href="#wellcome_aws_utils.deployment_utils.Deployment.created_at" title="Permalink to this definition">¶</a></dt>
    <dd><p>Alias for field number 3</p>
    </dd></dl>
    <dl class="attribute">
    <dt id="wellcome_aws_utils.deployment_utils.Deployment.deployment_key">
    <code class="descname">deployment_key</code><a class="headerlink" href="#wellcome_aws_utils.deployment_utils.Deployment.deployment_key" title="Permalink to this definition">¶</a></dt>
    <dd><p>Alias for field number 0</p>
    </dd></dl>
    <dl class="attribute">
    <dt id="wellcome_aws_utils.deployment_utils.Deployment.deployment_status">
    <code class="descname">deployment_status</code><a class="headerlink" href="#wellcome_aws_utils.deployment_utils.Deployment.deployment_status" title="Permalink to this definition">¶</a></dt>
    <dd><p>Alias for field number 1</p>
    </dd></dl>
    <dl class="attribute">
    <dt id="wellcome_aws_utils.deployment_utils.Deployment.task_definition">
    <code class="descname">task_definition</code><a class="headerlink" href="#wellcome_aws_utils.deployment_utils.Deployment.task_definition" title="Permalink to this definition">¶</a></dt>
    <dd><p>Alias for field number 4</p>
    </dd></dl>
    </dd></dl>
    <dl class="class">
    <dt id="wellcome_aws_utils.deployment_utils.DeploymentKey">
    <em class="property">class </em><code class="descclassname">wellcome_aws_utils.deployment_utils.</code><code class="descname">DeploymentKey</code><span class="sig-paren">(</span><em>id</em>, <em>service_arn</em><span class="sig-paren">)</span><a class="headerlink" href="#wellcome_aws_utils.deployment_utils.DeploymentKey" title="Permalink to this definition">¶</a></dt>
    <dd><dl class="attribute">
    <dt id="wellcome_aws_utils.deployment_utils.DeploymentKey.id">
    <code class="descname">id</code><a class="headerlink" href="#wellcome_aws_utils.deployment_utils.DeploymentKey.id" title="Permalink to this definition">¶</a></dt>
    <dd><p>Alias for field number 0</p>
    </dd></dl>
    <dl class="attribute">
    <dt id="wellcome_aws_utils.deployment_utils.DeploymentKey.service_arn">
    <code class="descname">service_arn</code><a class="headerlink" href="#wellcome_aws_utils.deployment_utils.DeploymentKey.service_arn" title="Permalink to this definition">¶</a></dt>
    <dd><p>Alias for field number 1</p>
    </dd></dl>
    </dd></dl>

ECS
***

.. raw:: html

    <span id="ecs"></span>
    <dl class="function">
    <dt id="wellcome_aws_utils.ecs_utils.clone_task_definition">
    <code class="descclassname">wellcome_aws_utils.ecs_utils.</code><code class="descname">clone_task_definition</code><span class="sig-paren">(</span><em>client</em>, <em>task_definition</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wellcome_aws_utils/ecs_utils.html#clone_task_definition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wellcome_aws_utils.ecs_utils.clone_task_definition" title="Permalink to this definition">¶</a></dt>
    <dd><p>Given a task definition ARN, clone the associated task.</p>
    <p>Returns the new task definition ARN.</p>
    </dd></dl>
    <dl class="function">
    <dt id="wellcome_aws_utils.ecs_utils.describe_cluster">
    <code class="descclassname">wellcome_aws_utils.ecs_utils.</code><code class="descname">describe_cluster</code><span class="sig-paren">(</span><em>ecs_client</em>, <em>cluster_arn</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wellcome_aws_utils/ecs_utils.html#describe_cluster"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wellcome_aws_utils.ecs_utils.describe_cluster" title="Permalink to this definition">¶</a></dt>
    <dd><p>Given a cluster ARN attempts to find a matching cluster description.</p>
    <p>Returns a cluster description.</p>
    </dd></dl>
    <dl class="function">
    <dt id="wellcome_aws_utils.ecs_utils.describe_service">
    <code class="descclassname">wellcome_aws_utils.ecs_utils.</code><code class="descname">describe_service</code><span class="sig-paren">(</span><em>ecs_client</em>, <em>cluster_arn</em>, <em>service_arn</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wellcome_aws_utils/ecs_utils.html#describe_service"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wellcome_aws_utils.ecs_utils.describe_service" title="Permalink to this definition">¶</a></dt>
    <dd><p>Given a cluster ARN and service ARN, attempts to find a matching
    service description.</p>
    <p>Returns a service description.</p>
    </dd></dl>
    <dl class="function">
    <dt id="wellcome_aws_utils.ecs_utils.get_cluster_arns">
    <code class="descclassname">wellcome_aws_utils.ecs_utils.</code><code class="descname">get_cluster_arns</code><span class="sig-paren">(</span><em>ecs_client</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wellcome_aws_utils/ecs_utils.html#get_cluster_arns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wellcome_aws_utils.ecs_utils.get_cluster_arns" title="Permalink to this definition">¶</a></dt>
    <dd><p>Extract the list of cluster ARNs in this account.</p>
    <p>Returns a list of cluster ARNs.</p>
    </dd></dl>
    <dl class="function">
    <dt id="wellcome_aws_utils.ecs_utils.get_latest_task_definition">
    <code class="descclassname">wellcome_aws_utils.ecs_utils.</code><code class="descname">get_latest_task_definition</code><span class="sig-paren">(</span><em>client</em>, <em>cluster</em>, <em>service</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wellcome_aws_utils/ecs_utils.html#get_latest_task_definition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wellcome_aws_utils.ecs_utils.get_latest_task_definition" title="Permalink to this definition">¶</a></dt>
    <dd><p>Given the name of a cluster and a service, return the ARN
    for its latest task definition.</p>
    </dd></dl>
    <dl class="function">
    <dt id="wellcome_aws_utils.ecs_utils.get_service_arns">
    <code class="descclassname">wellcome_aws_utils.ecs_utils.</code><code class="descname">get_service_arns</code><span class="sig-paren">(</span><em>ecs_client</em>, <em>cluster_arn</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wellcome_aws_utils/ecs_utils.html#get_service_arns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wellcome_aws_utils.ecs_utils.get_service_arns" title="Permalink to this definition">¶</a></dt>
    <dd><p>Given a cluster ARN, extracts the associated service ARNs.</p>
    <p>Returns a list of service ARNS.</p>
    </dd></dl>
    <dl class="function">
    <dt id="wellcome_aws_utils.ecs_utils.identify_cluster_by_app_name">
    <code class="descclassname">wellcome_aws_utils.ecs_utils.</code><code class="descname">identify_cluster_by_app_name</code><span class="sig-paren">(</span><em>client</em>, <em>app_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wellcome_aws_utils/ecs_utils.html#identify_cluster_by_app_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wellcome_aws_utils.ecs_utils.identify_cluster_by_app_name" title="Permalink to this definition">¶</a></dt>
    <dd><p>Given the name of one of our applications (e.g. api, calm_adapter),
    return the ARN of the cluster the task runs on.</p>
    </dd></dl>
    <dl class="function">
    <dt id="wellcome_aws_utils.ecs_utils.run_task">
    <code class="descclassname">wellcome_aws_utils.ecs_utils.</code><code class="descname">run_task</code><span class="sig-paren">(</span><em>ecs_client</em>, <em>cluster_name</em>, <em>task_definition</em>, <em>started_by</em>, <em>container_name='app'</em>, <em>command=[]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wellcome_aws_utils/ecs_utils.html#run_task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wellcome_aws_utils.ecs_utils.run_task" title="Permalink to this definition">¶</a></dt>
    <dd><p>Run a given command against a named container in a task definition
    on a particular cluster.</p>
    <p>Returns the response from calling run_task</p>
    </dd></dl>

S3
**

.. raw:: html

    <span id="s3"></span>
    <dl class="function">
    <dt id="wellcome_aws_utils.s3_utils.is_object">
    <code class="descclassname">wellcome_aws_utils.s3_utils.</code><code class="descname">is_object</code><span class="sig-paren">(</span><em>bucket</em>, <em>key</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wellcome_aws_utils/s3_utils.html#is_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wellcome_aws_utils.s3_utils.is_object" title="Permalink to this definition">¶</a></dt>
    <dd><p>Checks if an object exists in S3.  Returns True/False.</p>
    <table class="docutils field-list" frame="void" rules="none">
    <col class="field-name"/>
    <col class="field-body"/>
    <tbody valign="top">
    <tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
    <li><strong>bucket</strong> – Bucket of the object to check.</li>
    <li><strong>key</strong> – Key of the object to check.</li>
    </ul>
    </td>
    </tr>
    </tbody>
    </table>
    </dd></dl>
    <dl class="function">
    <dt id="wellcome_aws_utils.s3_utils.copy_object">
    <code class="descclassname">wellcome_aws_utils.s3_utils.</code><code class="descname">copy_object</code><span class="sig-paren">(</span><em>src_bucket</em>, <em>src_key</em>, <em>dst_bucket</em>, <em>dst_key</em>, <em>lazy=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wellcome_aws_utils/s3_utils.html#copy_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wellcome_aws_utils.s3_utils.copy_object" title="Permalink to this definition">¶</a></dt>
    <dd><p>Copy an object from one S3 bucket to another.</p>
    <table class="docutils field-list" frame="void" rules="none">
    <col class="field-name"/>
    <col class="field-body"/>
    <tbody valign="top">
    <tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
    <li><strong>src_bucket</strong> – Bucket of the source object.</li>
    <li><strong>src_key</strong> – Key of the source object.</li>
    <li><strong>dst_bucket</strong> – Bucket of the destination object.</li>
    <li><strong>dst_key</strong> – Key of the destination object.</li>
    <li><strong>lazy</strong> – Do a lazy copy.  This means that the object will only be
    copied if the destination object does not exist, or exists but has
    a different ETag from the source object.</li>
    </ul>
    </td>
    </tr>
    </tbody>
    </table>
    </dd></dl>
    <dl class="function">
    <dt id="wellcome_aws_utils.s3_utils.parse_s3_record">
    <code class="descclassname">wellcome_aws_utils.s3_utils.</code><code class="descname">parse_s3_record</code><span class="sig-paren">(</span><em>event</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wellcome_aws_utils/s3_utils.html#parse_s3_record"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wellcome_aws_utils.s3_utils.parse_s3_record" title="Permalink to this definition">¶</a></dt>
    <dd><p>Extracts a simple subset of an S3 update event.</p>
    </dd></dl>
    <dl class="function">
    <dt id="wellcome_aws_utils.s3_utils.write_objects_to_s3">
    <code class="descclassname">wellcome_aws_utils.s3_utils.</code><code class="descname">write_objects_to_s3</code><span class="sig-paren">(</span><em>bucket</em>, <em>key</em>, <em>objects</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wellcome_aws_utils/s3_utils.html#write_objects_to_s3"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wellcome_aws_utils.s3_utils.write_objects_to_s3" title="Permalink to this definition">¶</a></dt>
    <dd><p>Given an iterable of objects that can be serialised as JSON, serialise
    them as JSON, and write them to a file in S3, one per line.</p>
    <table class="docutils field-list" frame="void" rules="none">
    <col class="field-name"/>
    <col class="field-body"/>
    <tbody valign="top">
    <tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
    <li><strong>bucket</strong> – S3 bucket to upload the new file to.</li>
    <li><strong>key</strong> – S3 key to upload the new file to.</li>
    <li><strong>objects</strong> – An iterable of objects that can be serialised as JSON.</li>
    </ul>
    </td>
    </tr>
    </tbody>
    </table>
    </dd></dl>

SNS
***

.. raw:: html

    <span id="sns"></span>
    <dl class="class">
    <dt id="wellcome_aws_utils.sns_utils.SNSEvent">
    <em class="property">class </em><code class="descclassname">wellcome_aws_utils.sns_utils.</code><code class="descname">SNSEvent</code><span class="sig-paren">(</span><em>subject</em>, <em>message</em><span class="sig-paren">)</span><a class="headerlink" href="#wellcome_aws_utils.sns_utils.SNSEvent" title="Permalink to this definition">¶</a></dt>
    <dd><dl class="attribute">
    <dt id="wellcome_aws_utils.sns_utils.SNSEvent.message">
    <code class="descname">message</code><a class="headerlink" href="#wellcome_aws_utils.sns_utils.SNSEvent.message" title="Permalink to this definition">¶</a></dt>
    <dd><p>Alias for field number 1</p>
    </dd></dl>
    <dl class="attribute">
    <dt id="wellcome_aws_utils.sns_utils.SNSEvent.subject">
    <code class="descname">subject</code><a class="headerlink" href="#wellcome_aws_utils.sns_utils.SNSEvent.subject" title="Permalink to this definition">¶</a></dt>
    <dd><p>Alias for field number 0</p>
    </dd></dl>
    </dd></dl>
    <dl class="function">
    <dt id="wellcome_aws_utils.sns_utils.extract_json_message">
    <code class="descclassname">wellcome_aws_utils.sns_utils.</code><code class="descname">extract_json_message</code><span class="sig-paren">(</span><em>event</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wellcome_aws_utils/sns_utils.html#extract_json_message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wellcome_aws_utils.sns_utils.extract_json_message" title="Permalink to this definition">¶</a></dt>
    <dd><p>Extracts a JSON message from an SNS event sent to a lambda</p>
    <p>Deprecated in favour of extract_sns_messages_from_lambda_event</p>
    </dd></dl>
    <dl class="function">
    <dt id="wellcome_aws_utils.sns_utils.extract_sns_messages_from_lambda_event">
    <code class="descclassname">wellcome_aws_utils.sns_utils.</code><code class="descname">extract_sns_messages_from_lambda_event</code><span class="sig-paren">(</span><em>event</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wellcome_aws_utils/sns_utils.html#extract_sns_messages_from_lambda_event"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wellcome_aws_utils.sns_utils.extract_sns_messages_from_lambda_event" title="Permalink to this definition">¶</a></dt>
    <dd><p>Extracts a JSON message from an SNS event sent to an AWS Lambda.</p>
    <table class="docutils field-list" frame="void" rules="none">
    <col class="field-name"/>
    <col class="field-body"/>
    <tbody valign="top">
    <tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>event</strong> – An event sent to a Lambda from SNS.</td>
    </tr>
    <tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A generator of SNSEvent instances.</td>
    </tr>
    </tbody>
    </table>
    </dd></dl>
    <dl class="function">
    <dt id="wellcome_aws_utils.sns_utils.publish_sns_message">
    <code class="descclassname">wellcome_aws_utils.sns_utils.</code><code class="descname">publish_sns_message</code><span class="sig-paren">(</span><em>sns_client</em>, <em>topic_arn</em>, <em>message</em>, <em>subject='default-subject'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wellcome_aws_utils/sns_utils.html#publish_sns_message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wellcome_aws_utils.sns_utils.publish_sns_message" title="Permalink to this definition">¶</a></dt>
    <dd><p>Given a topic ARN and a series of key-value pairs, publish the key-value
    data to the SNS topic.</p>
    </dd></dl>

SQS
***

.. raw:: html

    <span id="sqs"></span>
    <dl class="function">
    <dt id="wellcome_aws_utils.sqs_utils.get_messages">
    <code class="descclassname">wellcome_aws_utils.sqs_utils.</code><code class="descname">get_messages</code><span class="sig-paren">(</span><em>queue_url</em>, <em>delete=False</em>, <em>batch_size=10</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/wellcome_aws_utils/sqs_utils.html#get_messages"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#wellcome_aws_utils.sqs_utils.get_messages" title="Permalink to this definition">¶</a></dt>
    <dd><p>Gets messages from an SQS queue.  If <code class="docutils literal"><span class="pre">delete</span></code> is True, the
    messages are also deleted after they’ve been read.</p>
    </dd></dl>

